<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/x-icon" href="/UJA/favicon.ico">

    <title>Unitée Jeunes Adultes</title>

    
    <!--CSS files -->

    <link rel="stylesheet" href="/UJA/css/bootstrap.min.css">
    <link rel="stylesheet" href="/UJA/css/headers.css">
    <link rel="stylesheet" href="/UJA/css/style.css">

    <script>
        function error() {
            document.getElementById("form").style.display = "block";
            document.getElementById("circle").style.display = "none";
            document.getElementById("error").style.display = "block";
        }
        function addFilm() {
            console.log("in the signin");

            document.getElementById("form").style.display = "none";
            document.getElementById("text").style.display = "none";
            document.getElementById("header").style.display = " !important";
            document.getElementById("header").style.display = "none !important";
            document.getElementById("footer").style.display = "none";
            document.getElementById("circle").style.display = "block";

            var titre = document.getElementById("titre").value;
            var description = document.getElementById("description").value;
            var time = document.getElementById("duration").value;
            var photo = document.getElementById("photo").value;

            var url = "/UJA/php/processAddFilm.php?titre=" + titre + "&desc=" + description + "&time=" + time + "&photo=" + photo;

            var getJSON = function (url, callback) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', url, true);
                xhr.responseType = 'text';
                xhr.withCredentials = true;
                xhr.onload = function () {
                    var status = xhr.status;
                    if (status == 200) {
                        callback(null, xhr.response);
                    } else {
                        callback(status);
                    }
                };
                xhr.send();
            };

            getJSON(url, function (err, data) {
                if (err != null) {
                    console.error(err);
                    error();
                } else {
                    window.location.href='/UJA/success.php';
                }
            });
        }
    </script>
</head>

<body>

    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom" id="header">

        <div class="text-center" style="margin-right: 50%; margin-left: 50%; padding-bottom: 20px;">
            <img src="src/image.jpeg" alt="1em" sizes="" srcset="">
        </div>

        <div class="text-center">
            <h1 class="fw-light">Unité Jeunes Adultes</h1>
        </div>

        <div class="container">
            <div class="d-flex justify-content-center py-3">
                <ul class="nav nav-pills">
                    <li class="nav-item"><a href="home.php" class="nav-link ">Home</a></li>
                    <li class="nav-item"><a href="films.php" class="nav-link active" aria-current="page">Films</a></li>
                    <li class="nav-item"><a href="lequipe.php" class="nav-link">L'equipe</a></li>
                    <li class="nav-item"><a href="groupe.php" class="nav-link">Groupe</a></li>
                </ul>
            </div>

    </header>

    <section class="py-5 text-center container" id="text"
        style="margin-top: 0 !important; padding-top: 0px !important; padding-bottom: 0px !important;">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h2 class="fw-light">Ajouter un film a la liste !</h1>
                <p class="lead text-muted">Rempli les informations pour ajouter ton film a la liste et peut etre etre
                    elu film de la soirée !</p>
            </div>
        </div>
        <hr style="width: 80%; margin: auto;">
    </section>

    <section id="form">
        <div class="container">
            <div class="d-flex flex-wrap justify-content-center py-3 mb-4 " style="margin-bottom: 0 !important;">
                <div class="form-floating">
                    <input type="name" class="form-control" id="titre" placeholder="name@example.com">
                    <label for="floatingInput">Titre</label>
                </div>
            </div>
            <hr style="width: 50%; margin: auto;">
            <div class="d-flex flex-wrap justify-content-center py-3 mb-4 " style="margin-bottom: 0 !important;">
                <div class="form-floating">
                    <input type="name" class="form-control" id="description" placeholder="name@example.com">
                    <label for="floatingInput">Description (165 max)</label>
                </div>
            </div>
            <hr style="width: 50%; margin: auto;">
            <div class="d-flex flex-wrap justify-content-center py-3 mb-4 " style="margin-bottom: 0 !important;">
                <div class="form-floating">
                    <input type="number" class="form-control" id="duration" placeholder="name@example.com">
                    <label for="floatingInput">Durée (en minutes)</label>
                </div>
            </div>
            <hr style="width: 50%; margin: auto;">
            <div class="d-flex flex-wrap justify-content-center py-3 mb-4 " style="margin-bottom: 0 !important;">
                <div class="form-floating">
                    <input type="url" class="form-control" id="photo" placeholder="name@example.com">
                    <label for="floatingInput">Photo (url)</label>
                </div>
            </div>
            <hr style="width: 50%; margin: auto;">

        </div>



        <p style="color: red; display: none;" id="error">Une erreur s'est produite. La clé d'entrée n'est peut
            etre pas bonne ? </p>
        </div>
        </div>
        <div class="container" style="padding: 20px;">
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 justify-content-center">
                <div>
                    <button class="w-100 btn btn-lg btn-primary" onclick="addFilm()">Ajouter</button>
                </div>

            </div>
        </div>
        <hr style="width: 80%; margin: auto;">
    </section>

    <div class="container" style="display: none;" id="circle">
        <div class="d-flex justify-content-center ">
            <div class="circle"></div>
        </div>
    </div>

    <footer class="py-3 my-4" id="footer">
        <div class="container"></div>
        <ul class="nav justify-content-center  pb-3 mb-3">
            <li class="nav-item"><a href="home.php" class="nav-link px-2 text-muted">Home</a></li>
            <li class="nav-item"><a href="films.php" class="nav-link px-2 text-muted">Films</a></li>
            <li class="nav-item"><a href="lequipe.php" class="nav-link px-2 text-muted">L'equipe</a></li>
            <li class="nav-item"><a href="groupe.php" class="nav-link px-2 text-muted">Groupe</a></li>
            <li class="nav-item"><a href="about.php" class="nav-link px-2 text-muted">About</a></li>
        </ul>
        <p class="text-center text-muted">&copy; 2022 <a href="https://github.com/mathisnns" style="text-decoration: none;">MathisNns</a></p>
        </div>
    </footer>

</body>

</html>